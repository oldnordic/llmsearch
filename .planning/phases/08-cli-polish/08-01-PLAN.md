---
phase: 08-cli-polish
plan: 01
type: execute
depends_on: []
files_modified: [src/cli.rs]
autonomous: true
---

<objective>
Add comprehensive help text and documentation to CLI arguments.

Purpose: Improve user experience with clear, actionable help messages and usage examples.
Output: Enhanced help text via `--help` and `llmsearch --help`
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/cli.rs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add comprehensive long_about documentation</name>
  <files>src/cli.rs</files>
  <action>Enhance the Cli struct documentation with a comprehensive long_about section:

```rust
#[derive(Parser, Debug)]
#[command(name = "llmsearch")]
#[command(about = "Deterministic, structured search for LLM workflows")]
#[command(long_about = "
llmsearch is an LLM-native code search tool that provides structured JSON output
designed for AI agent workflows.

Every match includes byte offsets, line/column numbers, execution IDs for
auditability, and deterministic ordering so LLMs get consistent, queryable
results instead of unstructured text streams.

EXAMPLES:
    # Search for 'fn main' in current directory
    llmsearch -p 'fn main'

    # Search in specific directory with glob filter
    llmsearch -r ./src -p 'struct.*Error' -g '*.rs'

    # Search with JSON output for LLM consumption
    llmsearch -p 'TODO:' --json

    # Limit results and filter by file type
    llmsearch -p 'test' -g '*.rs' -g '*.toml' -l 50

OUTPUT FORMAT (JSON):
    {
      \"execution_id\": \"uuid-v4\",
      \"pattern\": \"search_pattern\",
      \"matches\": [
        {
          \"match_id\": \"uuid-v4\",
          \"file\": \"path/to/file\",
          \"byte_start\": 0,
          \"byte_end\": 10,
          \"matched_text\": \"match\",
          \"line_number\": 1,
          \"column_number\": 1,
          \"context_before\": \"before\",
          \"context_after\": \"after\"
        }
      ],
      \"match_count\": 1
    }
")]
pub struct Cli {
```

Key improvements:
- Clear positioning as LLM-native tool
- Concrete examples covering common use cases
- JSON output schema documentation
- Human-readable explanations
</action>
  <verify>`cargo build` succeeds and `./target/debug/llmsearch --help` shows enhanced documentation</verify>
  <done>Help text shows comprehensive examples, usage patterns, and output format</done>
</task>

<task type="auto">
  <name>Task 2: Enhance individual argument help text</name>
  <files>src/cli.rs</files>
  <action>Update each argument's help text to be more descriptive and actionable:

Current state:
- `root`: \"Root directory to search (default: current directory)\"
- `pattern`: \"Regex pattern to search for\"
- `glob`: \"File glob patterns\"
- `limit`: \"Maximum number of results to return\"
- `json`: \"Output results as JSON\"

Update to:
```rust
/// Root directory to search recursively (default: current directory)
/// Uses .gitignore for skipping ignored files/directories
#[arg(short, long, default_value = ".")]
pub root: String,

/// Regular expression pattern to search for in file contents
/// Uses Rust regex syntax: https://docs.rs/regex/latest/regex/#syntax
#[arg(short, long)]
pub pattern: String,

/// File glob patterns to filter search (can be specified multiple times)
/// Examples: '*.rs', '*.toml', 'test_*.rs'
/// If not specified, all text files are searched
#[arg(short, long)]
pub glob: Vec<String>,

/// Maximum number of matches to return (default: 100)
/// Results are sorted by file path, then byte offset before limiting
#[arg(short, long, default_value = \"100\")]
pub limit: usize,

/// Output results as JSON to stdout (structured format for LLMs)
/// When enabled, suppresses debug output and human-readable messages
#[arg(long, default_value_t = false)]
pub json: bool,
```

Changes:
- Adds specific guidance for each flag
- References regex syntax documentation
- Provides glob pattern examples
- Explains sorting behavior for limit
- Clarifies --json behavior (suppresses debug output)
</action>
  <verify>`cargo build` succeeds and `./target/debug/llmsearch --help` shows updated arg help</verify>
  <done>Each argument has clear, actionable help text with examples</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cargo build` succeeds
- [ ] `llmsearch --help` shows enhanced documentation with examples
- [ ] `llmsearch --help` shows JSON output schema
- [ ] Each argument has descriptive help text
- [ ] Help is clear for both humans and LLMs reading it
</verification>

<success_criteria>

- Comprehensive help text with examples
- JSON output schema documented in help
- All argument help text enhanced with specifics
- Ready for --json flag implementation in 08-02
  </success_criteria>

<output>
After completion, create `.planning/phases/08-cli-polish/08-01-SUMMARY.md`
</output>
